## Rythmanalyse 4.7
## Nouveautés
## Réintégration PAD
## Ajout touche plus fréquente clavier & pad
## % appui touche freq clavier et pad
## HotMap et visualisations PAD

## A faire
## Vitesse souris et recentrage : coince toujours ...
## Améliorer prise en charge des gâchettes
## Vérifier que les exceptions linguistiques sont traitées

rm(list=ls()) # on vide la mémoire de RStudio
setwd("~/Documents/Projets R/Rythmanalyse/Zone Travail/Analyse") #choix du dossier où sont les .zip
source("~/Documents/Projets R/Rythmanalyse/Script R/RythmaFUNZIP4.7.R") #charge la fonction d'analyse

# Installation (si besoin) et chargement des packages requis
packages <- c("ggplot2", "gridExtra")
if (length(setdiff(packages, rownames(installed.packages()))) > 0) {
  install.packages(setdiff(packages, rownames(installed.packages())))  
}
library(ggplot2)
library(gridExtra)

## ANALYSE INDIVIDUELLE
## lancer Rythmanalyse ("nomdefichier"), ou nomde fichier est du type "2014.02.16.MT.Doom.s1.zip"
## ex. Rythmanalyse ("2014.04.08.MT.BlackwellUnbound.s1.zip")
## le script va extraire les .csv contenus dans le zip

## Pour chaque fichier la fonction enregistre 
## (1) les resultats dans un .ok.csv
## (2) une analyse graphique minimale des appuis clavier et souris / pad

## POUR UN TRAITEMENT MASSE
## Placer dans le répertoire de travail les .zip

session <- list.files (pattern = ".zip") # Récupérer liste des fichiers .zip dans le répetoire de travail
resultats <- lapply(session,Rythmanalyse) # On applique la fonction d'analyse
resultats <- do.call("rbind",resultats) # On aggrège les résultats
write.csv(resultats, file="rythmanalyseZIP.csv") #Choisir le nom du fichier de sortie

