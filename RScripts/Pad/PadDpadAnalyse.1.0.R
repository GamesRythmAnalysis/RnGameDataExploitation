pad.dpad.analyse <- function(dpadData){
  
  # on tronque le data frame jusqu'a ce que le dernier élement soit un 0: un Up
  while(dpadData$P.VALEUR[nrow(dpadData)] != 0){dpadData <-dpadData[-nrow(dpadData)] }
  
  dpadAxis <- data.frame(bouton=factor("Up"),event=factor("Down"),time=dpadData$P.TEMPS)
  
  # on recode les appuis up et down
  dpadAxis$event <- as.character(dpadAxis$event)
  dpadAxis$event[dpadData$P.VALEUR == 0] = "Up"
  dpadAxis$event <- as.factor(dpadAxis$event)
  
  # on supprime tout les down consécutif on ne garde que le premier down
  # les down consécutif sont dut a un changement de direction sur le dpad sans relachement intermédiare
  
  repeat{
    # which est bien plus rapide que grep et instancier isDown rend le tout encore plus rapide
    isDown<-dpadAxis$event == "Down"
    posDown <-which(isDown)
    dupDown <- which(isDown[posDown+1])
    dupDown <- posDown[dupDown]
    
    if(length(dupDown) == 0){break}
    
    # on empute les deux data frame de leur down dupliqué 
    # car on se sert du second plus loin il est important qu'ils aient la meme longeur
    dpadData <- dpadData[-dupDown,]
    dpadAxis <- dpadAxis[-dupDown,]
  }
  
  # on teste si les données sont traitable par l'algo actuelle si non
  # on leve une erreur, on sauvegarde des données pour pouvoir regarder ça directement et on export ce qui pourrais être utile
  if(length(dpadAxis$event[dpadAxis$event == "Up"]) !=length(dpadAxis$event[dpadAxis$event == "Down"])){
    dpadData <<- dpadData
    dpadAxis <<- dpadAxis
    write.csv2(cbind(dpadAxis,dpadData),"damagedDpadData.csv")
    stop("Donnée du Dpad trop endomager pour le retraitement actuelle, écriture de donnée de debug. \nVeuillez transmettre l'enregistrement contenant les abération en créant une issue ici : \nhttps://github.com/GamesRythmAnalysis/RnGameDataExploitation/issues")
  }
  
  # on recode les valeur pris par le dpad comme des boutton différent: 1 = Left, 0.875 left-down,0.75 = down etc... 
  dpadAxis$bouton <- as.character(dpadAxis$bouton)
  
  value <- seq(1,0.125,by=-0.125)
  mouvement <- c("Left","Left-Down","Down","Right","Right-Up","Up","Up-Left")  
  
  # on décode les différente actions comme on as une alternance parfaite de up et de down cette methode marche
  for (i in 1:8){
    pos <- which(dpadData$P.VALEUR==value[i])
    dpadAxis$bouton[pos] <- mouvement[i]
    dpadAxis$bouton[pos+1] <- mouvement[i]
  }
  
  dpadAxis$bouton <- as.factor(dpadAxis$bouton)
  
  down.time <- dpadAxis$time[dpadAxis$event == "Down"]
  bouton <- dpadAxis$bouton[dpadAxis$event == "Down"]
  durApp <- filter (group_by(dpadAxis, bouton), event == "Up")$time - filter (group_by(dpadAxis, bouton), event == "Down")$time
  
  return( data.frame(bouton,down.time,durApp))
  
}